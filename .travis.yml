language: php
php:
  - '5.5.38'
  - '5.6.25'
  - hhvm
sudo: required
dist: trusty
before_install: if [[ $TRAVIS_PHP_VERSION =~ ^hhvm ]]; then echo 'xdebug.enable = On' >> /etc/hhvm/php.ini; cat /etc/hhvm/php.ini; fi
#before_install: if [[ $TRAVIS_PHP_VERSION =~ ^hhvm ]]; then cat /etc/hhvm/php.ini; fi
install:
  - pecl install grpc || echo 'Failed to install grpc'
  - composer install
script:
  - vendor/bin/phpunit --coverage-clover=coverage.xml
  - vendor/bin/phpcs --standard=./ruleset.xml
after_success:
  - bash <(curl -s https://codecov.io/bash)
